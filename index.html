<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kyberturvallisuuden itsearviointityökalu</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
    h1 { text-align: center; }
    h2 { margin-top: 30px; color: #003366; }
    h3 { margin-top: 20px; color: #0055a5; }
    .question { margin-bottom: 10px; }
    select, textarea { width: 100%; padding: 5px; margin-top: 5px; }
    .average { font-weight: bold; margin-top: 10px; }
    .report { margin-top: 40px; }
    canvas { max-width: 100%; margin-top: 20px; }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>Kyberturvallisuuden itsearviointityökalu</h1>
<p>
Tämä työkalu auttaa organisaatiotasi arvioimaan kyberturvallisuuden tasoa suhteessa NIS2-direktiivin vaatimuksiin. 
Arviointi kattaa 12 keskeistä aihealuetta, jotka perustuvat Kyberturvallisuuskeskuksen ohjedokumenttiin. 
Jokaisessa aihealueessa on alakohdat, joista kysytään kaksi keskeistä kysymystä. 
Valitse kullekin kysymykselle arvio toteutuksen tasosta (1–4). 
Lisäksi voit kirjata kommentteja ja suosituksia parannustoimista.
</p>

<form id="assessmentForm">

<!-- Aihealueiden generointi -->
<div id="areas"></div>

<button type="button" onclick="calculateResults()">Laske yhteenveto</button>
</form>

<div class="report" id="report">
    <h2>Yhteenvetoraportti</h2>
    <canvas id="averageChart"></canvas>
    <div id="recommendations"></div>
</div>

<script>
const areasData = [
    {
        title: "1. Kyberturvallisuutta koskevan riskienhallinnan toimintaperiaatteet ja hallintatoimenpiteiden vaikuttavuuden arviointi",
        description: "Arvioi organisaation kyberturvallisuuden riskienhallinnan toimintaperiaatteet ja hallintatoimenpiteiden vaikuttavuuden arviointi.",
        subareas: [
            { title: "1.1 Kyberturvallisuuden riskienhallinnan toimintamalli", questions: ["Onko organisaatiolla dokumentoitu riskienhallinnan toimintamalli?", "Onko toimintamalli päivitetty säännöllisesti?"] },
            { title: "1.2 Kaikki vaaratekijät huomioiva lähestymistapa", questions: ["Sisältääkö riskienhallinta kaikki mahdolliset vaaratekijät?", "Onko lähestymistapa kattava ja systemaattinen?"] },
            { title: "1.3 Tarpeiden ja toimintojen tunnistaminen", questions: ["Onko organisaatio tunnistanut kaikki kriittiset toiminnot?", "Onko tarpeet ja toiminnot dokumentoitu?"] },
            { title: "1.4 Kyberuhkien tunnistaminen", questions: ["Onko organisaatio tunnistanut mahdolliset kyberuhat?", "Onko uhkien tunnistaminen integroitu osaksi riskienhallintaa?"] },
            { title: "1.5 Riskien käsittely", questions: ["Onko organisaatio määritellyt riskien käsittelymenettelyt?", "Onko riskien käsittely dokumentoitu ja viestitty henkilöstölle?"] },
            { title: "1.6 Riskienhallinnan vaikuttavuuden arviointi ja mittaristo", questions: ["Onko organisaatio määritellyt mittarit riskienhallinnan vaikuttavuuden arvioimiseksi?", "Onko mittaristo otettu käyttöön ja seurattu säännöllisesti?"] }
        ]
    },
    {
        title: "2. Viestintäverkkojen ja tietojärjestelmien turvallisuutta koskevat toimintaperiaatteet",
        description: "Arvioi organisaation viestintäverkkojen ja tietojärjestelmien turvallisuutta koskevat toimintaperiaatteet.",
        subareas: [
            { title: "2.1 Turvallisuutta koskevat toimintaperiaatteet ja menettelyt", questions: ["Onko organisaatiolla dokumentoidut turvallisuutta koskevat toimintaperiaatteet?", "Onko menettelyt päivitetty ja viestitty henkilöstölle?"] },
            { title: "2.2 Henkilöstön sitouttaminen", questions: ["Onko henkilöstö sitoutettu turvallisuusperiaatteisiin?", "Onko sitouttaminen osa organisaation kulttuuria?"] },
            { title: "2.3 Turvallisuusmenettelyiden valinta", questions: ["Onko organisaatio valinnut sopivat turvallisuusmenettelyt?", "Onko valinta perusteltu ja dokumentoitu?"] }
        ]
    },
    {
        title: "3. Viestintäverkkojen ja tietojärjestelmien hankinnan, kehittämisen ja ylläpidon turvallisuus sekä tarvittavat menettelyt haavoittuvuuksien käsittelemiseksi ja julkistamiseksi",
        description: "Arvioi organisaation viestintäverkkojen ja tietojärjestelmien hankinnan, kehittämisen ja ylläpidon turvallisuus sekä tarvittavat menettelyt haavoittuvuuksien käsittelemiseksi ja julkistamiseksi.",
        subareas: [
            { title: "3.1 Viestintäverkkojen ja tietojärjestelmien suojaus elinkaaren ajan", questions: ["Onko organisaatio määritellyt suojausmenettelyt elinkaaren ajaksi?", "Onko suojaus otettu huomioon kaikissa vaiheissa?"] },
            { title: "3.2 Hankinnan kohteen turvallisuus", questions: ["Onko hankinnan kohteen turvallisuus arvioitu?", "Onko arviointi dokumentoitu ja viestitty osapuolille?"] },
            { title: "3.3 Järjestelmäkovennukset", questions: ["Onko organisaatio toteuttanut järjestelmäkovennuksia?", "Onko kovennukset dokumentoitu ja otettu käyttöön?"] },
            { title: "3.4 Muutosten ja päivitysten hallinta", questions: ["Onko organisaatio määritellyt menettelyt muutosten ja päivitysten hallintaan?", "Onko menettelyt otettu käyttöön ja seurattu?"] },
            { title: "3.5 Turvallisuuden testaus", questions: ["Onko organisaatio suorittanut turvallisuuden testauksia?", "Onko testaukset dokumentoitu ja analysoitu?"] },
            { title: "3.6 Haavoittuvuuksien käsittely ja julkistaminen", questions: ["Onko organisaatio määritellyt menettelyt haavoittuvuuksien käsittelyyn?", "Onko menettelyt otettu käyttöön ja viestitty sidosryhmille?"] }
        ]
    },
    {
        title: "4. Toimintojen jatkuvuuden varmistaminen ja poikkeamien käsittely",
        description: "Arvioi organisaation toimintojen jatkuvuuden varmistaminen ja poikkeamien käsittely.",
        subareas: [
            { title: "4.1 Jatkuvuuden hallinta", questions: ["Onko organisaatiolla määritellyt jatkuvuuden hallinnan menettelyt?", "Onko menettelyt otettu käyttöön ja testattu?"] },
            { title: "4.2 Poikkeamien käsittely", questions: ["Onko organisaatio määritellyt poikkeamien käsittelymenettelyt?", "Onko menettelyt otettu käyttöön ja viestitty henkilöstölle?"] }
        ]
    },
    {
        title: "5. Toiminnan ja palvelujen tarjoamisen turvallisuuden valvonta ja arviointi",
        description: "Arvioi organisaation toiminnan ja palvelujen tarjoamisen turvallisuuden valvonta ja arviointi.",
        subareas: [
            { title: "5.1 Valvontatoimenpiteet", questions: ["Onko organisaatio määritellyt valvontatoimenpiteet?", "Onko toimenpiteet otettu käyttöön ja seurattu?"] },
            { title: "5.2 Arviointimenettelyt", questions: ["Onko organisaatio määritellyt arviointimenettelyt?", "Onko menettelyt otettu käyttöön ja dokumentoitu?"] }
        ]
    },
    {
        title: "6. Toiminnan ja palvelujen tarjoamisen turvallisuuden parantaminen",
        description: "Arvioi organisaation toiminnan ja palvelujen tarjoamisen turvallisuuden parantaminen.",
        subareas: [
            { title: "6.1 Parannustoimenpiteet", questions: ["Onko organisaatio määritellyt parannustoimenpiteet?", "Onko toimenpiteet otettu käyttöön ja seurattu?"] },
            { title: "6.2 Jatkuva parantaminen", questions: ["Onko organisaatio sitoutunut jatkuvaan parantamiseen?", "Onko parantaminen osa organisaation kulttuuria?"] }
        ]
    },
];

// Funktio renderöi kaikki alueet
function renderAreas() {
    const container = document.getElementById('areas');
    areasData.forEach((area, areaIndex) => {
        const areaDiv = document.createElement('div');
        areaDiv.innerHTML = `<h2>${area.title}</h2><p>${area.description}</p>`;
        area.subareas.forEach((sub, subIndex) => {
            const subDiv = document.createElement('div');
            subDiv.innerHTML = `<h3>${sub.title}</h3>`;
            sub.questions.forEach((q, qIndex) => {
                const qDiv = document.createElement('div');
                qDiv.classList.add('question');
                qDiv.innerHTML = `
                    <label>${q}</label>
                    <select id="area${areaIndex}_sub${subIndex}_q${qIndex}">
                        <option value="1">1 Ei toteutettu tai ei tietoa</option>
                        <option value="2">2 Osittain toteutettu</option>
                        <option value="3">3 Enimmäkseen toteutettu</option>
                        <option value="4">4 Täysin toteutettu</option>
                    </select>
                    <label>Kommentti:</label>
                    <textarea id="area${areaIndex}_sub${subIndex}_q${qIndex}_comment"></textarea>
                    <label>Suositukset:</label>
                    <textarea id="area${areaIndex}_sub${subIndex}_q${qIndex}_recommendation"></textarea>
                `;
                subDiv.appendChild(qDiv);
            });
        areaDiv.appendChild(subDiv);
        });
        container.appendChild(areaDiv);
    });
}

// Laskee keskiarvot ja generoi raportin
function calculateResults() {
    const averages = [];
    const recommendations = {};
    areasData.forEach((area, areaIndex) => {
        let areaSum = 0;
        let count = 0;
        area.subareas.forEach((sub, subIndex) => {
            sub.questions.forEach((q, qIndex) => {
                const val = parseInt(document.getElementById(`area${areaIndex}_sub${subIndex}_q${qIndex}`).value);
                areaSum += val;
                count++;
                // Kerätään suositukset
                const rec = document.getElementById(`area${areaIndex}_sub${subIndex}_q${qIndex}_recommendation`).value.trim();
                if (rec) {
                    if (!recommendations[area.title]) recommendations[area.title] = [];
                    recommendations[area.title].push(rec);
                }
            });
        });
        const avg = (areaSum / count).toFixed(2);
        averages.push({ title: area.title, average: avg });
        // Näytä keskiarvo alueen alapuolella
        const avgDiv = document.createElement('div');
        avgDiv.className = 'average';
        avgDiv.innerText = `Keskiarvo: ${avg}`;
        document.getElementById('areas').children[areaIndex].appendChild(avgDiv);
    });

    // Piirrä kaavio
    const ctx = document.getElementById('averageChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: averages.map(a => a.title),
            datasets: [{
                label: 'Keskiarvo',
                data: averages.map(a => a.average),
                backgroundColor: 'rgba(54, 162, 235, 0.5)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: { y: { beginAtZero: true, max: 4 } }
        }
    });

    // Näytä suositukset
    const recDiv = document.getElementById('recommendations');
    recDiv.innerHTML = '<h3>Suositukset</h3>';
    for (let area in recommendations) {
        recDiv.innerHTML += `<h4>${area}</h4><ul>`;
        recommendations[area].forEach(r => {
            recDiv.innerHTML += `<li>${r}</li>`;
        });
        recDiv.innerHTML += '</ul>';
    }
}

renderAreas();
</script>

</body>
</html>
